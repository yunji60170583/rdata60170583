---
title: 지역과 연령대에 따라 선호 정책이 다를까?
output: github_document
---
#1.요약(초록)

선호정책이 지역별로 어떻게 다른지 알아보다 특이하게 서남권만 11개 정책 중 교육정책이 상위권이 아닌 중위권이었다. 그래서 연령대별로 선호정책이 다를 것으로 생각하여 연령대별 선호정책을 알아보았다. 많은 데이터 중 필요한 데이터인 지역, 연령, 선호정책 1순위를 활용하였다.

우선 지역별 선호정책 순위를 알기 위해 필요한 형태로 데이터를 가공하였다.(area_name,policy_name) 결과는 5개의 지역 중 4개의 지역에서 교육정책이 상위권인데 반면 서남권만 유일하게 중위권이었다. 그래서 나는 서남권에 중년층보다는 노년층이 많을 것으로 생각하여 연령대별 선호정책을 알아보기로 하였다.

다음으로 연령대별 선호정책 순위를 알기 위해 A1_4_1_1열을 필요한 형태로 가공하였다. 보건의료_건강분야 정책이 상위권이었기 때문에 노인 인구가 많을 것으로 생각했던 나와의 생각과는 달리 다른 지역에 비해 노인 인구가 많지 않았다.

결과적으로 지역별로 선호정책이 다르다는 것은 그래프를 통해 알았지만 ’연령대별로 선호정책이 다를까?’라는 질문에서는 상관관계가 없다는 것으로 나타났다.


#2. 분석 주제


지역별, 연령대별로 선호정책이 다를까?


#3. 데이터 선정

출처 : 서울복지실태조사 다운로드 URL : http://data.si.re.kr/sisurvey2015er17 특성,구성 : 통계치가 아닌 가공 전의 원시 데이터이다. 크게 6개의 범주로 설문항목이 구성되어있다. (가구 일반사항,경제활동,건강와 의료이용,가족생활 여가 및 사회활동,복지서비스이용, 복지의식 및 욕구) 또한 모집단의 표본 수가 3,000개 이상으로 통계치를 구할 때때 신뢰도 높은 데이터이다.


#4. 분석


##1. 지역에 따른 선호정책

지역코드를 알아보기 쉽게 코드를 지역이름으로 변경한다. 지역코드 1~5까지가 정상 데이터이기 때문에 **이상치는 NA로 반환**

```{r message=FALSE, warning=FALSE}
library(readxl)     #필요한 패키지 로드
library(dplyr)
library(ggplot2)

total_data <- read_excel("data.xlsx")  #데이터 불러오기
```

```{r message=FALSE, warning=FALSE}
total_data <- total_data %>% 
  mutate(area_name = ifelse(area == 1, "도심권", 
                            ifelse(area == 2 , "동북권", 
                                   ifelse(area == 3, "서북권",
                                          ifelse(area == 4, "서남권",
                                                 ifelse(area == 5, "동남권", NA))))))
```

결측치 확인
```{r}
table(is.na(total_data$area_name))
```
별도의 결측치가 없어 정제하지 않고 다음 단계로 넘어간다.


정책코드를 알아보기 쉽게 코드를 정책이름으로 변경한다.
```{r}
policy <- data.frame(F11_1 = c(1:12),
           policy_name = c("복지", "경제", "교육", "보건의료_건강분야", 
                           "여가문화예술", "교통", "주택정책", "도시안전", 
                           "환경오염", "공원녹지문제", "도시계획", "기타"))


total_data <- left_join(total_data, policy, by="F11_1")
```
ifelse를 사용하지 않은 이유는 정책의 종류가 12개이기 때문에 코드가 길어져 새로운 데이터프레임을 만들고 기존 total_data에 변수로 추가 하였다.

```{r}
data <- total_data %>% select(area_name,F11_1,policy_name) #필요한 열만 추출
```

```{r}
#도심권에서의 선호정책#

data %>% filter(area_name == "도심권") %>% 
  group_by(policy_name) %>% 
  summarise(count=n()) %>% 
  arrange(desc(count))  
```
```{r}
city <- total_data %>% filter(area_name == "도심권")
ggplot(data = city, aes(x = policy_name)) + geom_bar() +coord_flip()     
```
1순위:경제(124), 2순위:복지(99), 3순위:교육(74)


```{r}
#동북권에서의 선호정책#

data %>% filter(area_name == "동북권") %>% 
  group_by(policy_name) %>% 
  summarise(count=n()) %>% 
  arrange(desc(count)) 

E_N <- total_data %>% filter(area_name == "동북권")
ggplot(data = E_N , aes(x = policy_name)) + geom_bar() +
  coord_flip()  
```
1순위:경제(255),2순위:복지(255),3순위:보건의료_건강분야(75)

```{r}
#서북권에서의 선호정책#
data %>% filter(area_name == "서북권") %>% 
  group_by(policy_name) %>% 
  summarise(count=n()) %>%
  arrange(desc(count))

W_N <- total_data %>% filter(area_name == "서북권")
ggplot(data = W_N , aes(x = policy_name)) + geom_bar() +
  coord_flip()
```
1순위:복지(183),2순위:경제(117),3순위:교육(75)

```{r}
#서남권에서의 선호정책#
data %>% filter(area_name == "서남권") %>% 
  group_by(policy_name) %>% 
  summarise(count=n()) %>%
  arrange(desc(count))   

W_S <- total_data %>% filter(area_name == "서남권")
ggplot(data = W_S , aes(x = policy_name)) + geom_bar() +
  coord_flip()
```

####1순위:복지(286),2순위:경제(240),3순위:보건의료_건강분야(78)
####다른 지역에서는 교육정책이 상위권인 반면 서남권 지역에서는 하위권에 머물렀다.


```{r}
#동남권의 선호정책#
data %>% filter(area_name == "동남권") %>% 
  group_by(policy_name) %>% 
  summarise(count=n()) %>%
  arrange(desc(count))

E_S <- total_data %>% filter(area_name == "동남권")
ggplot(data = E_S , aes(x = policy_name)) + geom_bar() +
  coord_flip() 
```
1순위 : 경제(206), 2순위:복지(198),3순위:교육(57)


*다른지역의 상위순위에 복지 경제 교육 이 포함되는데 왜 동북권만 교육정책이 5순위 이고 보건정책에 관심이 클까? 보건의료_건강분야 정책이 3순위인 이유가 노인연령대가 많아서이지 않을까?*


##2. 연령대에 따른 선호정책
```{r}
#연령대 분류#

total_data <- total_data %>% 
  mutate(age = ifelse(A1_4_1_1>=1990 , "20대", 
                            ifelse(A1_4_1_1>=1980 , "30대", 
                                   ifelse(A1_4_1_1>=1970, "40대",
                                          ifelse(A1_4_1_1>=1960, "50대",
                                                 ifelse(A1_4_1_1>=1956, 
                                                        "노인이아닌60대", 
                                                        ifelse(A1_4_1_1>=1950,
                                                               "노인인60대",
                                                               "70대 이상")))))))

data_2 <- total_data %>% select(area_name,age)
```

```{r}
total_data %>% 
  group_by(area_name) %>% 
  summarise(n())
```
노인인구 비유을 구하기 위한 지역별 표본수

```{r}
data_2 %>% 
  filter(area_name=="도심권") %>% 
  group_by(age) %>% 
  summarise(n()) %>% 
  arrange(desc(age))
```
```{r}
data_2 %>% 
  filter(area_name=="동북권") %>% 
  group_by(age) %>% 
  summarise(n()) %>% 
  arrange(desc(age))
```

```{r}
data_2 %>% 
  filter(area_name=="서북권") %>% 
  group_by(age) %>% 
  summarise(n()) %>% 
  arrange(desc(age))
```
```{r}
data_2 %>% 
  filter(area_name=="서남권") %>% 
  group_by(age) %>% 
  summarise(n()) %>% 
  arrange(desc(age))
```
```{r}
data_2 %>% 
  filter(area_name=="동남권") %>% 
  group_by(age) %>% 
  summarise(n()) %>% 
  arrange(desc(age))
```
```{r}
ratio <- data.frame("지역"= c("도심권", "동남권", "동북권", "서북권" ,"서남권"),
                    "노인설문답변자비율"= c("35%", "27%", "31%", "28%", "30%"))
ratio
```


###결론 : 지역별 선호정책 분석결과는 경제,복지정책은 모든 지역에서 1순위,2순였고 나머지 10개 정책 중에서 순위가 지역별로 달랐다. 그중에서 “서남권”지역이 뚜렷하게 다른 지역과 차이를 보였고 보건의료_건강분야 정책을 선호하였다. 이 결과로 나는 서남권 지역에 설문 답변자 중 노인비율이 높을 것으로 생각하고 연령대별 선호 정책을 분석하였지만, 연령대별로 선호정책이 다르다고 볼 수 없었다.


#5. 논의


한계점과 비판점 :

모집단(서울시)에서 추출한 표본 수(설문응답자수)는 3,019명으로 통계량을 냈을 때 신뢰할만한 수치이지만 나는 설문응답자에서 다시 지역별로 추출하고 한 번 더 연령대별로 추출하였기 때문에 표본 수가 적었다. 그래서 신뢰도가 높은 결과를 얻지 못하였고 선호정책에서 경제와 복지 정책이 눈에 띄게 큰 값을 차지하기 때문에 나머지 정책들을 가지고 분석을 하기에는 한계가 있었다.


#추후 분석 방향

지역별로 선호정책이 다르다는 결과가 나왔지만, 연령대별 선호정책이 다르다는 결과는 얻지 못하였다. 추후 다시 분석한다면 지역별 복지, 보건의료, 교육 시설을 조사하여 시설 분포에 따라 선호 정책을 조사할 것이다.
